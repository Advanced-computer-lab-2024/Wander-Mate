<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Products | Wander-Mate</title>
    <link rel="stylesheet" href="../styles/register.css">
</head>
<body>
    <div class="wrapper">
        <div class="title">
            Available Products
        </div>
        <div class="product-list" id="productList">
            <!-- Products will be dynamically inserted here -->
        </div>
    </div>

    <script>
      async function fetchProducts() {
          try {
              const response = await fetch("http://localhost:8000/viewSellerProducts"); // Adjust the endpoint accordingly
              const products = await response.json();

              // Check if products exist
              if (response.ok) {
                  displayProducts(products);
              } else {
                  document.getElementById('productList').innerHTML = '<p>No products available</p>';
              }
          } catch (error) {
              console.error("Error fetching products:", error);
              document.getElementById('productList').innerHTML = '<p>An error occurred while fetching products.</p>';
          }
      }

      function displayProducts(products) {
    const productList = document.getElementById('productList');
    productList.innerHTML = ''; // Clear existing products

    products.forEach((product) => {
        const productItem = document.createElement('div');
        productItem.className = 'product-item';

        // Update this path to your actual image directory
        const productImage = product.image ? product.image : 'src/Frontend/images/default-product.jpg';

        productItem.innerHTML = `
            <img src="${productImage}" alt="Product Image" class="product-image">
            <div class="product-details">
                <h2 class="product-name">${product.name}</h2>
                <p class="product-description">${product.description}</p>
                <p class="product-price">Price: $${product.price.toFixed(2)}</p>
                <p class="product-seller">Seller: ${product.sellerName}</p>
                <p class="product-ratings">Ratings: ${'★'.repeat(product.ratings)}${'☆'.repeat(5 - product.ratings)} (${product.ratings})</p>
                <p class="product-reviews">Reviews: 
                    <ul>
                        ${product.reviews.map(review => `<li>${review}</li>`).join('')}
                    </ul>
                </p>
            </div>
            <div class="edit-button">
                <a href="editProduct.html?id=${product.id}">Edit</a>
            </div>
        `;

        productList.appendChild(productItem);
    });
}


      // Fetch products when the page loads
      document.addEventListener('DOMContentLoaded', fetchProducts);
    </script>
</body>
</html>
